<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Test Chat Footer - Demo</title>
    <!-- Bootstrap CDN for modern style -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">
                            <i class="fas fa-vial"></i>
                            Test Chat Footer System - Demo
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-success">
                            <h5><i class="fas fa-check-circle"></i> Footer Chat Visibile!</h5>
                            <p class="mb-0">Il widget dovrebbe apparire in basso a destra. Clicca sul bottone per testare l'apertura del pannello chat.</p>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h5>üìä Caratteristiche Footer</h5>
                                <ul class="list-group">
                                    <li class="list-group-item">‚úÖ Posizione: Fixed bottom-right</li>
                                    <li class="list-group-item">‚úÖ Z-index: 9999 (sempre visibile)</li>
                                    <li class="list-group-item">‚úÖ Design: Gradiente blu/viola</li>
                                    <li class="list-group-item">‚úÖ Badge: Notifiche rosse</li>
                                </ul>
                            </div>
                            
                            <div class="col-md-6">
                                <h5>üé® Test Interattivit√†</h5>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-primary" onclick="testToggleChat()">
                                        <i class="fas fa-toggle-on"></i> Toggle Chat Panel
                                    </button>
                                    <button class="btn btn-outline-success" onclick="testStyles()">
                                        <i class="fas fa-palette"></i> Log Stili CSS
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h5>üìù Test Log</h5>
                            <div class="card bg-light">
                                <div class="card-body">
                                    <pre id="testLog" style="font-size: 12px; max-height: 200px; overflow-y: auto; margin: 0;">Caricamento test...</pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- FOOTER CHAT WIDGET CON STILI INLINE -->
    <div id="chatFooterWidget" style="position: fixed !important; bottom: 20px !important; right: 20px !important; z-index: 9999 !important; font-family: 'Segoe UI', Arial, sans-serif !important;">
        <!-- Toggle Button -->
        <button id="chatToggleBtn" title="Apri Chat" style="
            width: 64px !important; 
            height: 64px !important; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; 
            border-radius: 50% !important; 
            display: flex !important; 
            align-items: center !important; 
            justify-content: center !important; 
            color: white !important; 
            cursor: pointer !important; 
            box-shadow: 0 8px 32px rgba(0,0,0,0.15) !important; 
            transition: all 0.3s ease !important; 
            position: relative !important; 
            border: none !important; 
            outline: none !important;
        ">
            <i class="fas fa-comments" style="font-size: 24px !important;"></i>
            <span id="chatTotalBadge" style="
                position: absolute !important; 
                top: -5px !important; 
                right: -5px !important; 
                background: #dc3545 !important; 
                color: white !important; 
                border-radius: 50% !important; 
                width: 20px !important; 
                height: 20px !important; 
                font-size: 11px !important; 
                font-weight: bold !important; 
                display: flex !important; 
                align-items: center !important; 
                justify-content: center !important; 
                border: 2px solid white !important;
            ">5</span>
        </button>
        
        <!-- Chat Panel -->
        <div id="chatPanel" style="
            position: absolute !important; 
            bottom: 80px !important; 
            right: 0 !important; 
            width: 380px !important; 
            height: 500px !important; 
            background: white !important; 
            border-radius: 16px !important; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.2) !important; 
            display: none !important; 
            flex-direction: column !important; 
            overflow: hidden !important; 
            border: 1px solid #e1e8ed !important;
        ">
            <!-- Header -->
            <div style="
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; 
                color: white !important; 
                padding: 16px 20px !important; 
                display: flex !important; 
                justify-content: space-between !important; 
                align-items: center !important;
            ">
                <h5 style="margin: 0 !important; font-size: 16px !important; font-weight: 600 !important;">
                    <i class="fas fa-comments" style="margin-right: 8px !important;"></i>Chat Demo
                </h5>
                <button onclick="testToggleChat()" style="
                    background: none !important; 
                    border: none !important; 
                    color: white !important; 
                    font-size: 18px !important; 
                    cursor: pointer !important; 
                    padding: 4px !important; 
                    border-radius: 4px !important;
                ">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <!-- Content -->
            <div style="
                flex: 1 !important; 
                padding: 20px !important; 
                background: #f8f9fa !important; 
                display: flex !important; 
                flex-direction: column !important; 
                align-items: center !important; 
                justify-content: center !important; 
                text-align: center !important; 
                color: #657786 !important;
            ">
                <i class="fas fa-comments" style="font-size: 48px !important; opacity: 0.3 !important; margin-bottom: 16px !important;"></i>
                <h6 style="margin-bottom: 8px !important; color: #1a1a1a !important;">Chat Footer Widget</h6>
                <p style="font-size: 14px !important; margin: 0 !important;">Sistema di chat integrato nel footer con design moderno e responsive.</p>
                
                <!-- Demo chat items -->
                <div style="width: 100% !important; margin-top: 20px !important;">
                    <div style="
                        display: flex !important; 
                        align-items: center !important; 
                        padding: 12px !important; 
                        background: white !important; 
                        border-radius: 12px !important; 
                        margin-bottom: 8px !important; 
                        box-shadow: 0 2px 8px rgba(0,0,0,0.05) !important;
                    ">
                        <div style="
                            width: 32px !important; 
                            height: 32px !important; 
                            border-radius: 50% !important; 
                            background: linear-gradient(135deg, #28a745 0%, #20c997 100%) !important; 
                            display: flex !important; 
                            align-items: center !important; 
                            justify-content: center !important; 
                            color: white !important; 
                            margin-right: 10px !important;
                        ">
                            <i class="fas fa-globe" style="font-size: 14px !important;"></i>
                        </div>
                        <div style="flex: 1 !important;">
                            <div style="font-weight: 600 !important; font-size: 13px !important; color: #1a1a1a !important;">Chat Generale</div>
                            <div style="font-size: 11px !important; color: #657786 !important;">Ultimo messaggio...</div>
                        </div>
                        <span style="
                            background: #dc3545 !important; 
                            color: white !important; 
                            border-radius: 10px !important; 
                            padding: 2px 6px !important; 
                            font-size: 10px !important; 
                            font-weight: bold !important;
                        ">3</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    function log(message) {
        const logEl = document.getElementById('testLog');
        const timestamp = new Date().toLocaleTimeString();
        logEl.textContent += `[${timestamp}] ${message}\n`;
        logEl.scrollTop = logEl.scrollHeight;
    }

    function testToggleChat() {
        const panel = document.getElementById('chatPanel');
        const isVisible = panel.style.display === 'flex';
        panel.style.display = isVisible ? 'none' : 'flex';
        log(`Chat panel ${isVisible ? 'chiuso' : 'aperto'}`);
        return false;
    }

    function testStyles() {
        const widget = document.getElementById('chatFooterWidget');
        const button = document.getElementById('chatToggleBtn');
        const panel = document.getElementById('chatPanel');
        
        const widgetStyle = window.getComputedStyle(widget);
        const buttonStyle = window.getComputedStyle(button);
        
        log('=== STILI WIDGET ===');
        log(`Position: ${widgetStyle.position}`);
        log(`Bottom: ${widgetStyle.bottom}`);
        log(`Right: ${widgetStyle.right}`);
        log(`Z-index: ${widgetStyle.zIndex}`);
        
        log('=== STILI BOTTONE ===');
        log(`Width: ${buttonStyle.width}`);
        log(`Height: ${buttonStyle.height}`);
        log(`Background: presente`);
        log(`Border-radius: ${buttonStyle.borderRadius}`);
        
        log('Test stili completato');
    }

    // Hover effects
    document.getElementById('chatToggleBtn').addEventListener('mouseenter', function() {
        this.style.transform = 'scale(1.1) translateY(-2px)';
        this.style.boxShadow = '0 12px 40px rgba(102, 126, 234, 0.3)';
        log('Hover: effetto applicato');
    });

    document.getElementById('chatToggleBtn').addEventListener('mouseleave', function() {
        this.style.transform = 'scale(1)';
        this.style.boxShadow = '0 8px 32px rgba(0,0,0,0.15)';
    });

    document.getElementById('chatToggleBtn').addEventListener('click', function() {
        testToggleChat();
        log('Click: bottone chat premuto');
    });

    // Log iniziale
    window.addEventListener('DOMContentLoaded', function() {
        log('=== CHAT FOOTER DEMO ===');
        log('DOM caricato');
        
        setTimeout(() => {
            log('Footer widget dovrebbe essere visibile in basso a destra');
            log('Clicca il bottone per testare il pannello chat');
            testStyles();
        }, 500);
    });
    </script>
</body>
</html>
